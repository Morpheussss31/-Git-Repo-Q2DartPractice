void main() {
  double accountBal = 1000.0;

  print("*** Welcome to Simple ATM Simulation ***");
  print("Initial Bal: \$${accountBal.toStringAsFixed(2)}");
  
  double deposit1 = 200.0;
  print("\nSimulating Deposit of \$${depositt1.toStringAsFixed(2)}:");
  accountBal = deposit(accountBal, deposit1);
  
  double deposit2 = 50.50;
  print("\nSimulating Deposit of \$${deposit2.toStringAsFixed(2)}:");
  accountBal = deposit(accountBal, deposit2);

  double withdraw1 = 300.0;
  print("\nSimulating Withdrawal of \$${withdraw1.toStringAsFixed(2)}:");
  if (withdraw1 > 0) {
    if (withdraw1 <= accountBal) {
      accountBal = withdraw(accountBal, withdraw1);
    } else {
      print("Insufficient balance. Cannot withdraw \$${withdraw1.toStringAsFixed(2)}.");
    }
  } else {
    print("Invalid withdrawal. Must be a positive number.");
  }

  double withdraw2 = 1500.0;
  print("\nSimulating Withdrawal of \$${withdraw2.toStringAsFixed(2)} (expecting insufficient funds):");
  if (withdraw2 > 0) {
    if (withdraw2 <= accountBal) {
      accountBal = withdraw(accountBal, withdraw2);
    } else {
      print("Insufficient balance. Cannot withdraw \$${withdraw2.toStringAsFixed(2)}.");
    }
  } else {
    print("Invalid withdrawal. Must be a positive number.");
  }

  double withdraw3 = -100.0;
  print("\nSimulating Withdrawal of \$${withdraw3.toStringAsFixed(2)} (expecting invalid amount):");
  if (withdraw3 > 0) {
    if (withdraw3 <= accountBal) {
      accountBal = withdraw(accountBal, withdraw3);
    } else {
      print("Insufficient balance. Cannot withdraw \$${withdraw3.toStringAsFixed(2)}.");
    }
  } else {
    print("Invalid withdrawal. Must be a positive number.");
  }


  print("\nSimulation complete.");
  print("Final Balance: \$${accountBal.toStringAsFixed(2)}");
}

double deposit(double currentBalance, double amount) {
  if (amount <= 0) {
    print("Invalid deposit amount. Must be a positive number.");
    return currentBalance;
  }
  double newBalance = currentBalance + amount;
  print("Deposited: \$${amount.toStringAsFixed(2)}");
  print("New Balance: \$${newBalance.toStringAsFixed(2)}");
  return newBalance;
}

double withdraw(double currentBalance, double amount) {
  if (amount <= 0) {
    print("Invalid withdrawal amount. Must be a positive number.");
    return currentBalance;
  }
  if (amount > currentBalance) {
    print("Insufficient balance. Cannot withdraw \$${amount.toStringAsFixed(2)}.");
    return currentBalance;
  }
  double newBalance = currentBalance - amount;
  print("Withdrawn: \$${amount.toStringAsFixed(2)}");
  print("New Balance: \$${newBalance.toStringAsFixed(2)}");
  return newBalance;
}.
